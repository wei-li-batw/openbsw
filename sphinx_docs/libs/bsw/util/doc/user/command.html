<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="EclipseOpenBSWDocumentation" name="dox_trace_storage" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>util::command &mdash; Eclipse OpenBSW Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/rtd_theme_overrides.css?v=6fd0d55b" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/colors.css?v=3cafd8aa" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/colored_table.css?v=34b816d5" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/header.css?v=e632285e" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/dox_util_colors.css?v=dd14b177" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/dox_trace.css?v=60d3f72c" />

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../../../_static/copybutton.js?v=f281be69"></script>
        <script src="../../../../../_static/dox_trace.js?v=40719b51"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="util::crc" href="crc.html" />
    <link rel="prev" title="User Documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../doc/dev/index.html" class="icon icon-home">
            Eclipse OpenBSW Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/learning/overview.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/learning/SysTest/HW_Testing_Guide.html">Hardware Testing Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guidelines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/guidelines/conventions/index.html">Coding Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/guidelines/practices.html">Coding Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/guidelines/formatting/index.html">Formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/guidelines/unittests.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/guidelines/module.html">Module Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/guidelines/documentation.html">Module Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/guidelines/diagrams.html">Diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/guidelines/3rdparty.html">Third Party Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/guidelines/commit_message.html">Commit Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/guidelines/pull_request.html">Pull Request</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/platforms/posix/index.html">POSIX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/platforms/s32k148evb/index.html">S32K148 Evaluation Board</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/features/storage.html">Persistent Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/features/functional_safety.html">Functional Safety</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Modules</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../doc/dev/modules/common.html">Common</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../../../doc/dev/modules/common.html#bsw">BSW</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../async/doc/index.html">async - Asynchronous Execution Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../asyncConsole/doc/index.html">asyncConsole - Asynchronous Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../asyncFreeRtos/doc/index.html">asyncFreeRtos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../asyncImpl/doc/index.html">asyncImpl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../bsp/doc/index.html">bsp</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../common/doc/index.html">common</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../cpp2can/doc/index.html">cpp2can - CAN Abstraction Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../cpp2ethernet/doc/index.html">cpp2ethernet - Ethernet Abstractions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../docan/doc/index.html">docan - Diagnostics over CAN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../io/doc/index.html">io - IO Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lifecycle/doc/index.html">lifecycle - App Lifecycle Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../logger/doc/index.html">logger - Logger module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../loggerIntegration/doc/index.html">loggerIntegration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lwipSocket/doc/index.html">lwipSocket - LwIP v2 Socket Abstraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../middleware/doc/index.html">middleware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../platform/doc/index.html">platform - Platform Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../runtime/doc/index.html">runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stdioConsoleInput/doc/index.html">stdioConsoleInput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../storage/doc/index.html">storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../timer/doc/index.html">timer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../transport/doc/index.html">transport - Transport Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../transportRouterSimple/doc/index.html">transportRouterSimple</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../uds/doc/index.html">uds - Unified Diagnostic Services</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">util</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="index.html">User Documentation</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="index.html#overview">Overview</a></li>
<li class="toctree-l5 current"><a class="reference internal" href="index.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l6 current"><a class="current reference internal" href="#">command</a></li>
<li class="toctree-l6"><a class="reference internal" href="crc.html">crc</a></li>
<li class="toctree-l6"><a class="reference internal" href="format.html">format</a></li>
<li class="toctree-l6"><a class="reference internal" href="defer.html">defer</a></li>
<li class="toctree-l6"><a class="reference internal" href="logger.html">logger</a></li>
<li class="toctree-l6"><a class="reference internal" href="memory.html">memory</a></li>
<li class="toctree-l6"><a class="reference internal" href="meta.html">meta</a></li>
<li class="toctree-l6"><a class="reference internal" href="stream.html">stream</a></li>
<li class="toctree-l6"><a class="reference internal" href="string.html">string</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/dev/modules/common.html#bsp">BSP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../doc/dev/modules/common.html#safety">Safety</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/modules/posix.html">Posix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/modules/s32k1xx.html">S32K1xx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/modules/executables.html">Executables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc/dev/modules/mocks.html">Mocks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/UdsTool/doc/index.html">UdsTool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tools/puncover_tool/doc/index.html">Puncover</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../doc/dev/index.html">Eclipse OpenBSW Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../doc/dev/index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../../doc/dev/modules/common.html">Common</a> &raquo;</li>
        
          <li><a href="../index.html">util</a> &raquo;</li>
        
          <li><a href="index.html">User Documentation</a> &raquo;</li>
        
        <li><cite>util::command</cite></li>
    

    

      <li class="wy-breadcrumbs-aside">

        <!-- DOCUMENT STATUS -->

        

        <!-- DATA CLASSIFICATION -->

        

      </li>

    
  </ul>

  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="util-command">
<span id="id1"></span><h1><cite>util::command</cite><a class="headerlink" href="#util-command" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Typically, our embedded targets allow debug access through a simple <cite>shell</cite> over the console (serial
port). The <cite>command shell</cite> interface is part of the <strong>util</strong> module, allowing all <strong>BSW</strong>
modules to define commands for this <cite>shell</cite> without introducing additional dependencies.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">util::command::ICommand</span></code> interface is designed for implementing custom
commands. However, it is rare for a custom command to implement this interface
directly. Typically, a custom command derives from or reuses one of the existing
implementations available within the command namespace.</p>
</section>
<section id="simplecommand-and-parentcommand">
<h2>SimpleCommand and ParentCommand<a class="headerlink" href="#simplecommand-and-parentcommand" title="Link to this heading"></a></h2>
<p>A simple command can be easily created using the <code class="docutils literal notranslate"><span class="pre">util::command::SimpleCommand</span></code> class,
which can be constructed with all necessary parameters. No derivation is
required to implement a simple command. Its functionality can be encapsulated in a
(member) function and passed as a delegate via an <code class="docutils literal notranslate"><span class="pre">etl::delegate</span></code> object.</p>
<p>For groups or hierarchies of commands a <code class="docutils literal notranslate"><span class="pre">util::command::ParentCommand</span></code> object can be instantiated.
It is constructed with the necessary parameters (name and description) and allows child commands
to be added, which can be executed as subcommands. Arbitrary command hierarchies can be created by
nesting parent commands within each other.</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h3>
<p>The following code implements a simple command named “test” that includes two subcommands: “get”
and “put”, which allow read and write access to a contained value.</p>
<p>The header file <code class="docutils literal notranslate"><span class="pre">TestCommand.h</span></code> could look like:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;util/command/ParentCommand.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;util/command/SimpleCommand.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;util/format/SharedStringWriter.h&quot;</span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">test</span>
<span class="p">{</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TestCommand</span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="o">::</span><span class="n">util</span><span class="o">::</span><span class="n">command</span><span class="o">::</span><span class="n">ParentCommand</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">TestCommand</span><span class="p">();</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">get</span><span class="p">(</span><span class="o">::</span><span class="n">util</span><span class="o">::</span><span class="n">command</span><span class="o">::</span><span class="n">CommandContext</span><span class="o">&amp;</span><span class="w"> </span><span class="n">context</span><span class="p">);</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">put</span><span class="p">(</span><span class="o">::</span><span class="n">util</span><span class="o">::</span><span class="n">command</span><span class="o">::</span><span class="n">CommandContext</span><span class="o">&amp;</span><span class="w"> </span><span class="n">context</span><span class="p">);</span>

<span class="w">    </span><span class="o">::</span><span class="n">util</span><span class="o">::</span><span class="n">command</span><span class="o">::</span><span class="n">SimpleCommand</span><span class="w"> </span><span class="n">_get</span><span class="p">;</span>
<span class="w">    </span><span class="o">::</span><span class="n">util</span><span class="o">::</span><span class="n">command</span><span class="o">::</span><span class="n">SimpleCommand</span><span class="w"> </span><span class="n">_put</span><span class="p">;</span>

<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">_value</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">}</span><span class="w"> </span><span class="c1">// namespace test</span>
</pre></div>
</div>
<p>and the corresponding source file:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;TestCommand.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;util/format/SharedStringWriter.h&quot;</span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">test</span>
<span class="p">{</span>

<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="o">::</span><span class="nn">util</span><span class="o">::</span><span class="nn">command</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="o">::</span><span class="nn">util</span><span class="o">::</span><span class="nn">format</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">ExecuteFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">::</span><span class="n">etl</span><span class="o">::</span><span class="n">delegate</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="n">CommandContext</span><span class="o">&amp;</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>

<span class="n">TestCommand</span><span class="o">::</span><span class="n">TestCommand</span><span class="p">()</span>
<span class="o">:</span><span class="w"> </span><span class="n">ParentCommand</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Contains simple test commands.&quot;</span><span class="p">)</span>
<span class="p">,</span><span class="w"> </span><span class="n">_get</span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;get&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;Get the test value.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">SimpleCommand</span><span class="o">::</span><span class="n">ExecuteFunction</span><span class="o">::</span><span class="n">create</span><span class="o">&lt;</span><span class="n">TestCommand</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">TestCommand</span><span class="o">::</span><span class="n">get</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">),</span>
<span class="w">    </span><span class="k">this</span>
<span class="p">)</span>
<span class="p">,</span><span class="w"> </span><span class="n">_put</span><span class="p">(</span><span class="s">&quot;put&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;Put the test value.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">SimpleCommand</span><span class="o">::</span><span class="n">ExecuteFunction</span><span class="o">::</span><span class="n">create</span><span class="o">&lt;</span><span class="n">TestCommand</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">TestCommand</span><span class="o">::</span><span class="n">put</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">),</span>
<span class="w">    </span><span class="k">this</span>
<span class="p">)</span>
<span class="p">,</span><span class="w"> </span><span class="n">_value</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">addCommand</span><span class="p">(</span><span class="n">_get</span><span class="p">);</span>
<span class="w">    </span><span class="n">addCommand</span><span class="p">(</span><span class="n">_put</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="n">TestCommand</span><span class="o">::</span><span class="n">get</span><span class="p">(</span><span class="n">CommandContext</span><span class="o">&amp;</span><span class="w"> </span><span class="n">context</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="p">.</span><span class="n">checkEol</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">SharedStringWriter</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Value is %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">_value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="n">TestCommand</span><span class="o">::</span><span class="n">put</span><span class="p">(</span><span class="n">CommandContext</span><span class="o">&amp;</span><span class="w"> </span><span class="n">context</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="n">scanIntToken</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="p">.</span><span class="n">checkEol</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="p">}</span><span class="w"> </span><span class="c1">// namespace test</span>
</pre></div>
</div>
</section>
</section>
<section id="groupcommand">
<h2>GroupCommand<a class="headerlink" href="#groupcommand" title="Link to this heading"></a></h2>
<p>If minimizing RAM usage is a priority, you should use the <code class="docutils literal notranslate"><span class="pre">GroupCommand</span></code> class
as the base for your command functionality. This class replaces the <code class="docutils literal notranslate"><span class="pre">bios::CommandInterpreter</span></code> base class. The
<code class="docutils literal notranslate"><span class="pre">util::command::GroupCommand</span></code> serves as an alternative to the
<code class="docutils literal notranslate"><span class="pre">util::command::ParentCommand</span></code> class but supports only a two-level hierarchy (parent-child).</p>
<section id="id2">
<h3>Example<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<p>The file <code class="docutils literal notranslate"><span class="pre">TestCommand.h</span></code> counter part to the <code class="docutils literal notranslate"><span class="pre">ParentCommand</span></code>/<code class="docutils literal notranslate"><span class="pre">SimpleCommand</span></code> implementation of
TestCommand could then look like:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;util/command/GroupCommand.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;util/format/SharedStringWriter.h&quot;</span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">test</span>
<span class="p">{</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TestCommand</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">GroupCommand</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">TestCommand</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>

<span class="k">protected</span><span class="o">:</span>
<span class="w">    </span><span class="n">DECLARE_COMMAND_GROUP_GET_INFO</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">executeCommand</span><span class="p">(</span><span class="o">::</span><span class="n">util</span><span class="o">::</span><span class="n">command</span><span class="o">::</span><span class="n">CommandContext</span><span class="o">&amp;</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">idx</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="p">;</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="k">enum</span><span class="w"> </span><span class="nc">Id</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">ID_GET</span><span class="p">,</span>
<span class="w">        </span><span class="n">ID_PUT</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">}</span><span class="w"> </span><span class="c1">// namespace test</span>
</pre></div>
</div>
<p>with the corresponding source file:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;TestCommand.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;util/format/SharedStringWriter.h&quot;</span>

<span class="k">namespace</span><span class="w"> </span><span class="nn">test</span>
<span class="p">{</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="o">::</span><span class="nn">util</span><span class="o">::</span><span class="nn">command</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="o">::</span><span class="nn">util</span><span class="o">::</span><span class="nn">format</span><span class="p">;</span>

<span class="n">DEFINE_COMMAND_GROUP_GET_INFO_BEGIN</span><span class="p">(</span><span class="n">TestCommand</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;test&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Contains simple test commands.&quot;</span><span class="p">)</span>
<span class="n">COMMAND_GROUP_COMMAND</span><span class="p">(</span><span class="n">ID_GET</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;get&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Get the test value.&quot;</span><span class="p">)</span>
<span class="n">COMMAND_GROUP_COMMAND</span><span class="p">(</span><span class="n">ID_PUT</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;put&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Put the test value.&quot;</span><span class="p">)</span>
<span class="n">DEFINE_COMMAND_GROUP_GET_INFO_END</span>

<span class="c1">// Implement the virtual function in the class:</span>
<span class="kt">void</span><span class="w"> </span><span class="n">TestCommand</span><span class="o">::</span><span class="n">executeCommand</span><span class="p">(</span><span class="n">CommandContext</span><span class="o">&amp;</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">ID_GET</span><span class="p">:</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="p">.</span><span class="n">checkEol</span><span class="p">())</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">SharedStringWriter</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Value is %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">_value</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">ID_PUT</span><span class="p">:</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="n">scanIntToken</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="p">.</span><span class="n">checkEol</span><span class="p">())</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="p">}</span><span class="w"> </span><span class="c1">// namespace test</span>
</pre></div>
</div>
</section>
</section>
<section id="commandcontext">
<h2>CommandContext<a class="headerlink" href="#commandcontext" title="Link to this heading"></a></h2>
<p>The default implementations heavily rely on the
<code class="docutils literal notranslate"><span class="pre">util::command::CommandContext</span></code> class. Context objects of this type provide
access to command-line arguments and an output stream for presenting textual results.</p>
<p>Commands require a defined list of arguments. The <code class="docutils literal notranslate"><span class="pre">util::command::CommandContext</span></code> class offers helpful
methods for parsing arguments, such as identifiers, integer values, hex byte buffers, or arbitrary
whitespace-separated tokens. Additionally, it includes methods for checking conditions on the
arguments or determining if there are pending arguments. Refer to <code class="docutils literal notranslate"><span class="pre">util::command::CommandContext</span></code>
for a more detailed description.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025 Accenture.</p>
  </div>

  <div role="footer_string">
    <p>Documentation from 2025-12-10 03:10:47, official build.</p>

    
      <a href="../../../../../_sources/libs/bsw/util/doc/user/command.rst.txt" rel="nofollow"> View page source</a>
    

  </div>

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>