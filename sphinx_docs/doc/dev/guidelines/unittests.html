<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="EclipseOpenBSWDocumentation" name="dox_trace_storage" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Unit Tests &mdash; Eclipse OpenBSW Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/rtd_theme_overrides.css?v=6fd0d55b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../../_static/colors.css?v=3cafd8aa" />
      <link rel="stylesheet" type="text/css" href="../../../_static/colored_table.css?v=34b816d5" />
      <link rel="stylesheet" type="text/css" href="../../../_static/header.css?v=e632285e" />
      <link rel="stylesheet" type="text/css" href="../../../_static/dox_util_colors.css?v=dd14b177" />
      <link rel="stylesheet" type="text/css" href="../../../_static/dox_trace.css?v=60d3f72c" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script src="../../../_static/dox_trace.js?v=40719b51"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Module Structure" href="module.html" />
    <link rel="prev" title="Automatic Formatting" href="formatting/automatic.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Eclipse OpenBSW Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../learning/overview.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning/SysTest/HW_Testing_Guide.html">Hardware Testing Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guidelines</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="conventions/index.html">Coding Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="practices.html">Coding Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="formatting/index.html">Formatting</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Unit Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#test-framework">Test Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="#naming-convention">Naming Convention</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-description">Test Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logic-in-tests">Logic in Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#anonymous-namespaces">Anonymous Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mocks">Mocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-configurations">Test Configurations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Module Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Module Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="diagrams.html">Diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="3rdparty.html">Third Party Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="commit_message.html">Commit Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="pull_request.html">Pull Request</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../platforms/posix/index.html">POSIX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platforms/s32k148evb/index.html">S32K148 Evaluation Board</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features/storage.html">Persistent Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/functional_safety.html">Functional Safety</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/common.html">Common</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/posix.html">Posix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/s32k1xx.html">S32K1xx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/executables.html">Executables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/mocks.html">Mocks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/UdsTool/doc/index.html">UdsTool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/puncover_tool/doc/index.html">Puncover</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Eclipse OpenBSW Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
        <li>Unit Tests</li>
    

    

      <li class="wy-breadcrumbs-aside">

        <!-- DOCUMENT STATUS -->

        

        <!-- DATA CLASSIFICATION -->

        

      </li>

    
  </ul>

  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="unit-tests">
<span id="id1"></span><h1>Unit Tests<a class="headerlink" href="#unit-tests" title="Link to this heading"></a></h1>
<section id="test-framework">
<h2>Test Framework<a class="headerlink" href="#test-framework" title="Link to this heading"></a></h2>
<p>For unit tests, the <a class="reference external" href="https://github.com/google/googletest">GoogleTest</a> framework is to be used.
GoogleTest sources are included in OpenBSW. Read the
<a class="reference external" href="https://google.github.io/googletest/primer.html">GoogleTest Primer</a> to learn how to use this
framework.</p>
</section>
<section id="naming-convention">
<h2>Naming Convention<a class="headerlink" href="#naming-convention" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>When testing a C++ class, use the class name + “Test” for the <strong>test suite</strong>.</p></li>
<li><p>Names of the <strong>test cases</strong> should be descriptive of the behaviour being tested. Separate words by
<em>CamelCase</em>.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">TEST_F</span><span class="p">(</span><span class="n">MemoryQueueTest</span><span class="p">,</span><span class="w"> </span><span class="n">WriteToFullQueue</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="test-description">
<h2>Test Description<a class="headerlink" href="#test-description" title="Link to this heading"></a></h2>
<p>Giving expressive test case names is usually not enough or the name can become very long. This is
why each test case should have a description what this test is verifying. This also makes it easier
for a reviewer to understand if a test actually does what the author intended.</p>
<p>The syntax for the description is a <strong>Doxygen comment block</strong> before the test case.
The <strong>brief description</strong> is mandatory, the <strong>detailed description</strong> can skip it for very simple
test cases. For longer test cases add the detailed description.</p>
<p>It must be clear from either the brief or detailed description which of the
<a class="reference internal" href="documentation/content.html#documentation-content-features"><span class="std std-ref">features</span></a> is being tested.</p>
<p>Example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Test if writing to a full MemoryQueue fails.</span>
<span class="cm"> *</span>
<span class="cm"> * The queue is filled completely with data. Afterwards, an attempt to write additional</span>
<span class="cm"> * data is made. This should fail and the queue content should remain unchanged.</span>
<span class="cm"> * Also, the write pointer should not have moved. The return value of the write operation</span>
<span class="cm"> * should indicate the failure with the value MEMORY_QUEUE_FULL.</span>
<span class="cm"> */</span>
<span class="n">TEST_F</span><span class="p">(</span><span class="n">MemoryQueueTest</span><span class="p">,</span><span class="w"> </span><span class="n">WriteToFullQueue</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="logic-in-tests">
<h2>Logic in Tests<a class="headerlink" href="#logic-in-tests" title="Link to this heading"></a></h2>
<p>Tests should not contain any logic (“if” statements).
Expected values should generally be constants and not be calculated.</p>
</section>
<section id="anonymous-namespaces">
<h2>Anonymous Namespaces<a class="headerlink" href="#anonymous-namespaces" title="Link to this heading"></a></h2>
<p>In order to avoid linker issues, put tests in an anonymous namespace so symbol names do not
clash between each other:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>
<span class="p">...</span>

<span class="k">namespace</span><span class="w"> </span><span class="p">{</span>

<span class="cm">/* Your tests go here! */</span>

<span class="p">}</span><span class="w"> </span><span class="c1">// namespace</span>
</pre></div>
</div>
</section>
<section id="mocks">
<span id="unittests-mocks"></span><h2>Mocks<a class="headerlink" href="#mocks" title="Link to this heading"></a></h2>
<p>It is usually <strong>preferable to write code that is testable</strong> without the use of mocks; mocks are a
last resort for situations when modules are tightly coupled. To create a mock use <code class="docutils literal notranslate"><span class="pre">gmock</span></code>, don’t
try to implement it by hand.</p>
<p>If you need a mock that implements a particular interface, there should already be such a
mock ready to use in the <strong>same module that defines the interface</strong>. If there’s no mock in that
module but you need one, add the mock to the source module and not to the one where you will use it.</p>
<p>In general <strong>provide a mock for all interfaces of your module</strong>. Instantiate them and call every
method at least once in your unit test to ensure that the mocks are compatible to your interfaces.
To generate google mocks one can use <a class="reference external" href="https://github.com/sky-mart/genmock/">genmock</a>.</p>
<p>Use always <em>StrictMock</em> when instantiating a mock:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">StrictMock</span><span class="o">&lt;</span><span class="n">FooMock</span><span class="o">&gt;</span><span class="w"> </span><span class="n">fooMock</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="test-configurations">
<h2>Test Configurations<a class="headerlink" href="#test-configurations" title="Link to this heading"></a></h2>
<p>Some modules need configuration data. Usually, this configuration data can be shared between
multiple unit tests. To avoid code duplication, put the configuration data into shared modules.</p>
<p>BSP configurations are typically platform specific, as they are often incompatible to each other,
e.g. different pin numbers or other data types. Higher level configurations like for UDS or BusId
can be reused by different platforms.</p>
<p>These are the location in the OpenBSW workspace for configuration modules:</p>
<ul>
<li><p>Platform dependent:</p>
<blockquote>
<div><ul class="simple">
<li><p>platforms/posix/unitTest/…</p></li>
<li><p>platforms/s32k1xx/unitTest/…</p></li>
<li><p>…</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Platform independent:</p>
<blockquote>
<div><ul class="simple">
<li><p>executables/unitTest/…</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025 Accenture.</p>
  </div>

  <div role="footer_string">
    <p>Documentation from 2025-12-10 03:10:44, official build.</p>

    
      <a href="../../../_sources/doc/dev/guidelines/unittests.rst.txt" rel="nofollow"> View page source</a>
    

  </div>

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>